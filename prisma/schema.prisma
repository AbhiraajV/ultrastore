datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

generator client {
  provider = "prisma-client-js"
}


model Profile {
 id String @id @default(uuid())
 userId String @unique
 name String
 imageUrl String @db.Text
 email String @db.Text

 youtubeAccessToken String? @db.Text
 youtubeRefreshToken String? @db.Text

 files File[]

 createdAt DateTime @default(now())
 updatedAt DateTime @updatedAt

}
model File {
  id String @id @default(uuid())
  name String
  description String @db.Text
  resolution Resolution
  fileType String
  fileSize Int


  youtubeUrl String? @unique
  firestoreZipUrl String @unique
  decodedFileFirestoreUrl String? @unique

  profileId String
  profile Profile @relation(fields: [profileId], references: [id],onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([profileId])
}

enum Resolution {
  R_240p
  R_360p
  R_480p
  R_720p
  R_1080p
  R_1440p
  R_2160p
  R_4320p
}